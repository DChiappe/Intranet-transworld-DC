<h2>Personas</h2>
<p>Conoce la estructura organizacional, la cultura de la empresa y los cumplea√±os del equipo.</p>

<div class="grid-opciones" style="margin-bottom: 30px; display: flex; gap: 10px;">
  <a class="boton-opcion" href="/personas/organigrama">
    Organigrama
    <span>Visualiza la estructura interna del equipo.</span>
  </a>

  <% if (user && (user.rol === 'admin' || user.rol === 'rrhh')) { %>
    <a class="boton-opcion" href="/personas/crear" style="border-left: 4px solid #28a745;">
      Agregar Persona
      <span>Registra un nuevo colaborador.</span>
    </a>
  <% } %>
</div>

<h3>Cumplea√±os del equipo</h3>

<% if (!personas || personas.length === 0) { %>
  <p>No hay cumplea√±os registrados.</p>
<% } else { %>
  <table class="tabla-simple">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>√Årea</th>
        <th>Cumplea√±os</th>
        <% if (user && (user.rol === 'admin' || user.rol === 'rrhh')) { %>
          <th style="text-align: center;">Acciones</th>
        <% } %>
      </tr>
    </thead>
    <tbody>
      <% personas.forEach(p => { %>
        <tr>
          <td><%= p.nombre %></td>
          <td><%= p.area %></td>
          <td>
            <%= new Date(p.fecha_nacimiento).toLocaleDateString('es-CL', {
              day: '2-digit',
              month: '2-digit'
            }) %>
          </td>
          
          <% if (user && (user.rol === 'admin' || user.rol === 'rrhh')) { %>
            <td style="text-align: center;">
              <a href="/personas/editar/<%= p.id %>" 
                 style="background-color: #007bff; color: white; padding: 5px 10px; border-radius: 4px; text-decoration: none; margin-right: 5px;"
                 title="Editar">
                 ‚úèÔ∏è
              </a>
              
              <a href="/personas/eliminar/<%= p.id %>" 
                 onclick="return confirm('¬øEst√°s seguro de eliminar a esta persona?');"
                 style="background-color: #dc3545; color: white; padding: 5px 10px; border-radius: 4px; text-decoration: none;"
                 title="Eliminar">
                 üóëÔ∏è
              </a>
            </td>
          <% } %>
        </tr>
      <% }) %>
    </tbody>
  </table>
<% } %>