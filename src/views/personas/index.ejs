<h2>Personas</h2>
<p>Conoce la estructura organizacional, la cultura de la empresa y los cumpleaÃ±os del equipo.</p>

<div class="grid-opciones" style="margin-bottom: 30px; display: flex; gap: 15px; align-items: flex-start;">
  <a class="boton-opcion" href="/personas/organigrama">
    Organigrama
    <span>Visualiza la estructura interna del equipo.</span>
  </a>

  <% if (user && (user.rol === 'admin' || user.rol === 'rrhh')) { %>
    <a class="boton-opcion" href="/personas/crear" style="border-left: 4px solid #28a745;">
      Agregar Persona
      <span>Registra un nuevo colaborador al equipo.</span>
    </a>
  <% } %>
</div>

<h3>CumpleaÃ±os del equipo</h3>

<% if (!personas || personas.length === 0) { %>
  <p>No hay cumpleaÃ±os registrados.</p>
<% } else { %>
  <table class="tabla-simple">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Ãrea</th>
        <th>CumpleaÃ±os</th>
        <% if (user && (user.rol === 'admin' || user.rol === 'rrhh')) { %>
          <th style="width: 120px; text-align: center;">Acciones</th>
        <% } %>
      </tr>
    </thead>
    <tbody>
      <% personas.forEach(p => { %>
        <tr>
          <td><%= p.nombre %></td>
          <td><%= p.area %></td>
          <td>
            <%= new Date(p.fecha_nacimiento).toLocaleDateString('es-CL', {
              day: '2-digit',
              month: '2-digit'
            }) %>
          </td>
          
          <% if (user && (user.rol === 'admin' || user.rol === 'rrhh')) { %>
            <td style="text-align: center;">
              <div style="display: flex; justify-content: center; gap: 8px;">
                <a href="/personas/editar/<%= p.id %>" 
                   class="btn-icon"
                   style="background-color: #007bff; color: white; padding: 6px 10px; border-radius: 4px; text-decoration: none;"
                   title="Editar">
                   âœï¸
                </a>
                
                <form action="/personas/eliminar/<%= p.id %>" method="POST" onsubmit="return confirm('Â¿EstÃ¡s seguro de eliminar a <%= p.nombre %>?');" style="margin:0;">
                  <button type="submit" 
                          style="background-color: #dc3545; color: white; border: none; padding: 6px 10px; border-radius: 4px; cursor: pointer;"
                          title="Eliminar">
                    ğŸ—‘ï¸
                  </button>
                </form>
              </div>
            </td>
          <% } %>
        </tr>
      <% }) %>
    </tbody>
  </table>
<% } %>