<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
  <div>
    <h2>Personal y CumpleaÃ±os</h2>
    <p>Listado de colaboradores del equipo.</p>
  </div>
  
  <a href="/RRHH" class="link-volver" style="text-decoration: none; color: #555;">â† Volver al menÃº</a>
</div>

<div class="grid-opciones" style="margin-bottom: 30px;">
  <% if (typeof user !== 'undefined' && (user.role === 'admin' || user.role === 'rrhh')) { %>
    <a class="boton-opcion" href="/RRHH/crear" style="display: inline-block; padding: 10px 20px; background-color: #28a745; color: white; border-radius: 5px; text-decoration: none; font-weight: bold;">
      + Agregar Persona
    </a>
  <% } %>
</div>

<% if (!personas || personas.length === 0) { %>
  <p>No hay colaboradores registrados.</p>
<% } else { %>
  <table class="tabla-simple" style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr style="background-color: #f8f9fa; border-bottom: 2px solid #dee2e6;">
        <th style="padding: 12px; text-align: left;">Foto</th>
        <th style="padding: 12px; text-align: left;">Nombre</th>
        <th style="padding: 12px; text-align: left;">Ãrea</th>
        <th style="padding: 12px; text-align: left;">CumpleaÃ±os</th>
        <% if (typeof user !== 'undefined' && (user.role === 'admin' || user.role === 'rrhh')) { %>
          <th style="padding: 12px; text-align: center;">Acciones</th>
        <% } %>
      </tr>
    </thead>
    <tbody>
      <% personas.forEach(p => { %>
        <tr style="border-bottom: 1px solid #dee2e6;">
          <td style="padding: 12px;">
             <% if (p.foto) { %>
               <img src="<%= p.foto %>" alt="Foto" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 1px solid #ddd;">
             <% } else { %>
               <div style="width: 40px; height: 40px; border-radius: 50%; background: #eee; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; color: #999;">
                 <%= p.nombre.charAt(0) %>
               </div>
             <% } %>
          </td>      
          <td style="padding: 12px;"><%= p.nombre %></td>
          <td style="padding: 12px;"><%= p.area %></td>
          <td style="padding: 12px;">
            <%= new Date(p.fecha_nacimiento).toLocaleDateString('es-CL', { day: '2-digit', month: '2-digit' }) %>
          </td>
          
          <% if (typeof user !== 'undefined' && (user.role === 'admin' || user.role === 'rrhh')) { %>
            <td style="padding: 12px; text-align: center;">
              <div style="display: flex; justify-content: center; gap: 8px;">
                <a href="/RRHH/editar/<%= p.id %>" style="text-decoration: none; font-size: 1.2rem;" title="Editar">âœï¸</a>
                <form action="/RRHH/eliminar/<%= p.id %>" method="POST" onsubmit="return confirm('Â¿EstÃ¡s seguro de eliminar a <%= p.nombre %>?');" style="margin:0;">
                  <button type="submit" style="background: none; border: none; cursor: pointer; font-size: 1.2rem;" title="Eliminar">ğŸ—‘ï¸</button>
                </form>
              </div>
            </td>
          <% } %>
        </tr>
      <% }) %>
    </tbody>
  </table>
<% } %>