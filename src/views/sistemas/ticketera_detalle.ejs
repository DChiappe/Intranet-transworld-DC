<!DOCTYPE html>
<h2>Detalle de Ticket</h2>
<p>Aquí se muestra la información detallada de un ticket seleccionado.</p>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title><%= titulo %></title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    header { background: #003366; color: #fff; padding: 10px 20px; }
    nav a { color: #fff; margin-right: 15px; text-decoration: none; }
    main { padding: 20px; max-width: 800px; }
    dt { font-weight: bold; }
    dd { margin: 0 0 10px 0; }
    form { margin-top: 20px; }
    select { padding: 6px; }
    button { padding: 6px 10px; margin-left: 8px; background: #003366; color: #fff; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { opacity: 0.9; }
  </style>
</head>
<body>

  <main>
    <h2>Ticket #<%= ticket.id %></h2>

    <dl>
      <dt>Título</dt>
      <dd><%= ticket.titulo %></dd>

      <dt>Descripción</dt>
      <dd><pre><%= ticket.descripcion %></pre></dd>

      <dt>Categoría</dt>
      <dd><%= ticket.categoria || '-' %></dd>

      <dt>Prioridad</dt>
      <dd><%= ticket.prioridad %></dd>

      <dt>Estado</dt>
      <dd><%= ticket.estado %></dd>

      <dt>Solicitante</dt>
      <dd><%= ticket.solicitante_nombre || '-' %> (<%= ticket.solicitante_email || '-' %>)</dd>

      <dt>Creado</dt>
      <dd><%= ticket.fecha_creacion.toLocaleString('es-CL', { timeZone: 'America/Santiago' }) %></dd>

      <dt>Última actualización</dt>
      <dd><%= ticket.fecha_actualizacion.toLocaleString('es-CL', { timeZone: 'America/Santiago' }) %></dd>
    </dl>

    <h3>Actualizar estado</h3>
    <form action="/sistemas/ticketera/<%= ticket.id %>/estado" method="POST">
      <select name="estado">
        <option value="Abierto" <%= ticket.estado === 'Abierto' ? 'selected' : '' %>>Abierto</option>
        <option value="En progreso" <%= ticket.estado === 'En progreso' ? 'selected' : '' %>>En progreso</option>
        <option value="Cerrado" <%= ticket.estado === 'Cerrado' ? 'selected' : '' %>>Cerrado</option>
      </select>
      <button type="submit">Guardar</button>
      <a href="/sistemas/ticketera" style="margin-left:20px;">Volver al listado</a>
    </form>
  </main>
</body>
</html>
